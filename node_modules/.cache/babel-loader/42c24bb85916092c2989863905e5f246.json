{"ast":null,"code":"import _regeneratorRuntime from\"/home/nilufar/Desktop/movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/nilufar/Desktop/movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/nilufar/Desktop/movies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import SearchImg from'../img/search.png';import{key,baseUrl}from'../utils';export default function Search(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];function handleChange(e){setValue(e.target.value);search(key,e.target.value);}function search(_x,_x2){return _search.apply(this,arguments);}function _search(){_search=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key,val){var response,_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(val.length>0)){_context.next=14;break;}_context.prev=1;_context.next=4;return fetch(\"\".concat(baseUrl,\"/search/movie?api_key=\").concat(key,\"&language=en-US&query=\").concat(val,\"&page=1&include_adult=false\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:_data=_context.sent;setData(_data);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return _search.apply(this,arguments);}return React.createElement(\"div\",{className:\"search-bar\"},React.createElement(\"div\",{class:\"inner-search\"},React.createElement(\"span\",null,React.createElement(\"img\",{src:SearchImg})),React.createElement(\"input\",{type:\"text\",placeholder:\"Search\",onChange:handleChange})),React.createElement(\"div\",{class:\"search_result\"},value.length>0&&data&&data.results.map(function(_ref){var title=_ref.title,backdrop_path=_ref.backdrop_path;return React.createElement(\"a\",{href:\"\"},React.createElement(\"div\",{class:\"movie-caption\"},React.createElement(\"div\",{className:\"movie-cart\",style:{background:backdrop_path===null?\"#eee\":\"url(\\\"https://image.tmdb.org/t/p/w342\".concat(backdrop_path,\"\\\")\")}}),React.createElement(\"h3\",{class:\"title\"},title)));})));}","map":{"version":3,"sources":["/home/nilufar/Desktop/movies/src/components/search.js"],"names":["React","useState","SearchImg","key","baseUrl","Search","value","setValue","data","setData","handleChange","e","target","search","val","length","fetch","response","json","console","error","results","map","title","backdrop_path","background"],"mappings":"sbAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,SAAP,KAAsB,mBAAtB,CACA,OAASC,GAAT,CAAcC,OAAd,KAA6B,UAA7B,CAGA,cAAe,SAASC,CAAAA,MAAT,EAAkB,eACLJ,QAAQ,CAAC,EAAD,CADH,wCACxBK,KADwB,eACjBC,QADiB,8BAEPN,QAAQ,CAAC,IAAD,CAFD,yCAExBO,IAFwB,eAElBC,OAFkB,eAK/B,QAASC,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACvBJ,QAAQ,CAACI,CAAC,CAACC,MAAF,CAASN,KAAV,CAAR,CACAO,MAAM,CAACV,GAAD,CAAMQ,CAAC,CAACC,MAAF,CAASN,KAAf,CAAN,CACD,CAR8B,QAUhBO,CAAAA,MAVgB,kIAU/B,iBAAsBV,GAAtB,CAA2BW,GAA3B,0IACMA,GAAG,CAACC,MAAJ,CAAa,CADnB,iEAG2BC,CAAAA,KAAK,WAAIZ,OAAJ,kCAAoCD,GAApC,kCAAgEW,GAAhE,gCAHhC,QAGUG,QAHV,qCAIyBA,CAAAA,QAAQ,CAACC,IAAT,EAJzB,QAIYV,KAJZ,eAKMC,OAAO,CAACD,KAAD,CAAP,CALN,iFAOMW,OAAO,CAACC,KAAR,cAPN,qEAV+B,yCAsB/B,MACE,4BAAK,SAAS,CAAC,YAAf,EACE,2BAAK,KAAK,CAAC,cAAX,EACE,gCACE,2BAAK,GAAG,CAAElB,SAAV,EADF,CADF,CAIE,6BAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,QAA/B,CAAwC,QAAQ,CAAEQ,YAAlD,EAJF,CADF,CAOE,2BAAK,KAAK,CAAC,eAAX,EACGJ,KAAK,CAACS,MAAN,CAAe,CAAf,EAAoBP,IAApB,EAA4BA,IAAI,CAACa,OAAL,CAAaC,GAAb,CAAiB,kBAAGC,CAAAA,KAAH,MAAGA,KAAH,CAAUC,aAAV,MAAUA,aAAV,OAC5C,0BAAG,IAAI,CAAC,EAAR,EACE,2BAAK,KAAK,CAAC,eAAX,EACE,2BAAK,SAAS,CAAC,YAAf,CAA4B,KAAK,CAAE,CAAEC,UAAU,CAAED,aAAa,GAAK,IAAlB,CAAyB,MAAzB,gDAAyEA,aAAzE,OAAd,CAAnC,EADF,CAEE,0BAAI,KAAK,CAAC,OAAV,EAAmBD,KAAnB,CAFF,CADF,CAD4C,EAAjB,CAD/B,CAPF,CADF,CAoBD","sourcesContent":["import React, { useState } from 'react'\nimport SearchImg from '../img/search.png'\nimport { key, baseUrl } from '../utils';\n\n\nexport default function Search() {\n  const [value, setValue] = useState(\"\")\n  const [data, setData] = useState(null)\n\n\n  function handleChange(e) {\n    setValue(e.target.value)\n    search(key, e.target.value)\n  }\n\n  async function search(key, val) {\n    if (val.length > 0) {\n      try {\n        let response = await fetch(`${baseUrl}/search/movie?api_key=${key}&language=en-US&query=${val}&page=1&include_adult=false`);\n        const data = await response.json();\n        setData(data)\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }\n\n  return (\n    <div className=\"search-bar\">\n      <div class=\"inner-search\">\n        <span >\n          <img src={SearchImg}/>\n        </span>\n        <input type=\"text\" placeholder=\"Search\" onChange={handleChange} />\n      </div>\n      <div class=\"search_result\">\n        {value.length > 0 && data && data.results.map(({ title, backdrop_path, }) =>\n          <a href=\"\">\n            <div class=\"movie-caption\">\n              <div className=\"movie-cart\" style={{ background: backdrop_path === null ? \"#eee\" : `url(\"https://image.tmdb.org/t/p/w342${backdrop_path}\")` }} ></div>\n              <h3 class=\"title\">{title}</h3>\n            </div>\n          </a>\n        )}\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}